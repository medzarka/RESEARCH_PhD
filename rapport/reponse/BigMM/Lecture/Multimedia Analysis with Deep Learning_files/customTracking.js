function ntptBindEvent(event,func){if((typeof(func)==="function")&&document.body){if(document.body.addEventListener){document.body.addEventListener(event,func,true);}else if(document.body.attachEvent){document.body.attachEvent("on"+event,func);}}}function ntptIsOnsite(linkHref){if(linkHref.indexOf(document.domain)>-1){return true;}return false;}function ntptInitializeEvents(){var e=(navigator.appVersion.indexOf("MSIE")!==-1)?"click":"mousedown";ntptBindEvent(e,ntptActivityTracking);}function ntptClimbDOM(evt,tag){var e=evt.target||evt.srcElement;while(e.tagName&&(e.tagName.toLowerCase()!==tag.toLowerCase())){e=e.parentElement||e.parentNode;}return e;}function ntptActivityTracking(evt){evt=evt||window.event;if((evt!==null&&typeof evt!==undefined)||(((typeof(evt.which)==="number")&&(evt.which===1||evt.which===2||evt.which===3))||((typeof(evt.button)==="number")&&(evt.button===1||evt.button===2||evt.button===4)))){var a=ntptClimbDOM(evt,"A");if(a!==null&&typeof a.href!=="undefined"){var linkHref=a.href,lcLinkHref=linkHref.toLowerCase();var idMatch=(typeof a.id==="string")?a.id.match(/(highlight\d)-link\d/):null;if(idMatch!==null){var clickedHighlight=document.getElementById(idMatch[1]),titleElement=clickedHighlight.getElementsByTagName("H3")[0],titleText=titleElement.innerText||titleElement.textContent||"Unknown Title";ntptCallEvent("ev=HighlightClick&highlight="+titleText.replace(/^\s*|\s*$/,""));}if(!ntptIsOnsite(linkHref)){ntptCallEvent("ev=ExitLink&exitlink="+escape(lcLinkHref));}if(typeof a.id==="string"&&a.id.match(/Index Term \d{1,3}/)){var parentLI=ntptClimbToParent(a,"li"),sectionTitle=(parentLI!==null)?parentLI.getElementsByTagName("B")[0].innerHTML:"Unknown";ntptCallEvent("ev=IndexTermsClick&indextermclick="+a.innerHTML.replace(/\<span[^\>]*\>|\<\/span\>/g,"").replace(/^\s+|\s+$/g,"")+"&indextermcat="+sectionTitle);}if(lcLinkHref.match(/addtofilecabinet/)!==null){var arnumber=ntptParseQueryParameter(linkHref,"arnumber");ntptCallEvent("ev=FileCabinetStore&file="+arnumber);}if(document.location.pathname.toLowerCase().match(/filecabinet[^\.]*.jsp/)!==null&&lcLinkHref.indexOf("stamp.jsp")>-1){var arnumber=ntptParseQueryParameter(linkHref,"arnumber");ntptCallEvent("ev=FileCabinetDownload&file="+arnumber);}}var input=ntptClimbDOM(evt,"INPUT");if(input!==null&&typeof input.id==="string"&&input.id.toLowerCase().indexOf("submit-selections")>-1){var fieldsets=document.getElementsByTagName("FIELDSET"),numFieldsets=fieldsets.length;var query=ntptGetAdvancedSearchQuery(fieldsets,numFieldsets),filterCats=ntptGetFilterCategories(fieldsets,numFieldsets);ntptCallEvent("ev=AdvancedSearch&advsearchphrase="+query+"&advsearchfilters="+filterCats);}var img=ntptClimbDOM(evt,"IMG");if(img!==null&&typeof img.id!=="undefined"){var citations="",parseParam="";if(img.id==="popup-download-document-citations"){parseParam="abstract";}else if(img.id.match(/popup-download-[^-]*-citation/)){parseParam="contents";}if(parseParam!==""){citations=ntptParseCitationArticleNumber(parseParam);}if(citations!==""){ntptCallEvent("ev=CitationClick&file="+citations);}}var fieldset=ntptClimbDOM(evt,"FIELDSET");if(fieldset!==null&&fieldset.className&&fieldset.className.toLowerCase().indexOf("search-refine")>-1&&input!==null&&input.alt&&input.alt.toLowerCase().match(/results$/)){var facettype=fieldset.id,facetdetail="";facettype=(typeof facettype!=="undefined")?facettype:"Unknown Type";facetdetail=ntptParseSearchFacetDetail(facettype,fieldset);ntptCallEvent("ev=SearchFacetClick&facettype="+facettype+"&facetdetail="+facetdetail);}}}function ntptClimbToParent(element,parentTagName){while(element.tagName&&(element.tagName.toLowerCase()!==parentTagName.toLowerCase())){element=element.parentNode||element.parentElement;}return element;}function ntptParseSearchFacetDetail(facettype,fieldset){if(facettype!=="Unknown Type"){if(facettype==="Publication Year"){var inputs=fieldset.getElementsByTagName("INPUT"),i,numInputs=inputs.length,startYear="",endYear="";for(i=0;i<numInputs;i++){if(inputs[i].id.toLowerCase()==="text_startyear"){startYear=inputs[i].value+"";}if(document.getElementById("radio_range").checked&&inputs[i].id.toLowerCase()==="text_endyear"){endYear="-"+inputs[i].value;}}return startYear+endYear;}else{var ulists=document.getElementsByTagName("UL"),selectedRefinements="",i,numULists=ulists.length,facetdetail="";for(i=0;i<numULists;i++){if(ulists[i].className.toLowerCase()==="selections"){var spans=ulists[i].getElementsByTagName("SPAN"),j,numSpans=spans.length;for(j=0;j<numSpans;j++){if(spans[j].className.toLowerCase()==="refinement"){facetdetail+=","+escape(spans[j].innerHTML.replace(/\s\s+|\<[^\>]*\>|\([^\)]*\)|,|amp\;/g,""));}}}}return(facetdetail!=="")?facetdetail.substring(1):"";}}return"";}function ntptParseQueryParameter(queryString,queryParam){var queryStringMatch=queryString.match(new RegExp(queryParam+"=([^&#]*)","i"));if(queryStringMatch!==null){return queryStringMatch[1];}return"";}function ntptParseCitationArticleNumber(parseParam){if(parseParam==="abstract"){return ntptParseQueryParameter(document.location.search,"arnumber");}else if(parseParam==="contents"){var ulists=document.getElementsByTagName("UL"),numULists=ulists.length,citations="",i,j;for(i=0;i<numULists;i++){if(ulists[i].className==="Results"){var results=ulists[i].getElementsByTagName("LI"),numResults=results.length;for(j=0;j<numResults;j++){var checkbox=results[j].getElementsByTagName("INPUT")[0];if(typeof checkbox!=="undefined"&&checkbox.checked){citations+=","+checkbox.id;}}return citations.substring(1);}}}return"";}function ntptGetAdvancedSearchQuery(fieldsets,numFieldsets){for(var i=0;i<numFieldsets;i++){if(fieldsets[i].className==="primary-fields"){var inputs=fieldsets[i].getElementsByTagName("INPUT"),numInputs=inputs.length,j,query=inputs[0].value;for(j=1;j<numInputs;j++){var currentValue=inputs[j].value;if(currentValue!==""){var conditional=(query!=="")?" "+document.getElementById("searchconditional_"+(j+1)).value+" ":"";query+=conditional+currentValue;}}return query;}}return"";}function ntptGetFilterCategories(fieldsets,numFieldsets){var filterCats="";for(var i=0;i<numFieldsets;i++){if(typeof fieldsets[i].id==="string"){var fieldsetMatch=fieldsets[i].id.toLowerCase().match(/as-.*/);if(fieldsetMatch!==null){var filterInputs=fieldsets[i].getElementsByTagName("INPUT"),numInputs=filterInputs.length,foundFilter=false,j;for(j=0;j<numInputs&&!foundFilter;j++){if(filterInputs[j].checked){var currentFilterCat=fieldsets[i].getElementsByTagName("A")[0].innerHTML;if(currentFilterCat==="Publication Year"){var label=filterInputs[j].parentNode||filterInputs[j].parentElement;if(label.innerHTML.indexOf("All Available Years")===-1){filterCats+=currentFilterCat+",";foundFilter=true;}}else{filterCats+=currentFilterCat+",";foundFilter=true;}}}}}}return filterCats.substring(0,filterCats.length-1);}function ntptIdentifyHighlightLinks(){var i=1,j,highlight=document.getElementById("highlight"+i),links=[],numLinks=0;while(highlight!==null){links=highlight.getElementsByTagName("A");numLinks=links.length;for(j=0;j<numLinks;j++){links[j].id="highlight"+i+"-link"+j;}highlight=document.getElementById("highlight"+(++i));}}function ntptIdentifyIndexTerms(){var indexTermDiv=document.getElementById("index-terms");if(indexTermDiv!==null){var indexTermContainer=indexTermDiv.parentNode||indexTermDiv.parentElement,indexTermLinks=indexTermContainer.getElementsByTagName("A"),numIndexTerms=indexTermLinks.length,i;for(i=0;i<numIndexTerms;i++){indexTermLinks[i].id="Index Term "+i;}}}function ntptSetSessionCookie(name,value){var currentDate=new Date();var expirationDate=new Date(currentDate.getTime()+1800000);var newCookie=name+"="+value+"; expires="+expirationDate.toGMTString()+"; domain=.ieee.org; path=/;";document.cookie=newCookie;}function ntptGetCookie(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y);}}return"";}function ntptCallEvent(paramString,msDelay){ntptEventTag(paramString);if(typeof msDelay==="number"){var currentDate=null,startDate=new Date();do{currentDate=new Date();}while(currentDate-startDate<msDelay);}}function ntptTrackStartAndEndTimes(){var returnString="",currentDate=new Date(),formatTime=function(num){return(num<10)?"0"+num:num;},formattedDate=formatTime(currentDate.getHours())+":"+formatTime(currentDate.getMinutes());if(ntptGetCookie("visitstart")===""){returnString+="&visitstart="+formattedDate;}ntptSetSessionCookie("visitstart",formattedDate);returnString+="&visitend="+formattedDate;return returnString;}function ntptIdentifySearchFacets(){var divs=document.getElementsByTagName("DIV"),numDivs=divs.length,i;for(i=0;i<numDivs;i++){if(divs[i].className.toLowerCase().indexOf("section separator dhtml")>-1){var divLinks=divs[i].getElementsByTagName("A"),numDivLinks=divLinks.length,j;for(j=0;j<numDivLinks;j++){if(divLinks[j].className.toLowerCase().indexOf("revealcontrol")>-1){var divFieldsets=divs[i].getElementsByTagName("FIELDSET"),numDivFieldsets=divFieldsets.length,k;for(k=0;k<numDivFieldsets;k++){if(divFieldsets[k].className.toLowerCase().indexOf("search-refine")>-1){divFieldsets[k].id=divLinks[j].innerHTML;}}}}}}}function ntptTestFileCabFull(){if(document.location.pathname.toLowerCase().match(/filecabinetfull.jsp/)){var arnumber=ntptParseQueryParameter(document.location.search,"arnumber");ntptCallEvent("ev=FileCabFull&file="+arnumber);}}var NTPT_PGEXTRA=NTPT_PGEXTRA||"";setTimeout(ntptInitializeEvents,300);setTimeout(ntptIdentifyHighlightLinks,300);setTimeout(ntptIdentifySearchFacets,300);setTimeout(ntptIdentifyIndexTerms,300);setTimeout(ntptTestFileCabFull,300);NTPT_PGEXTRA+=ntptTrackStartAndEndTimes();